###
# This is the default TS-setup for dr_blob, Version 2.1.0
##

plugin.tx_drblob_pi1 = USER
plugin.tx_drblob_pi1 {
  userFunc = tx_drblob_pi1->main

  templateFile = EXT:dr_blob/res/dr_blob.tmpl
  fileExtIconFolder = typo3/sysext/cms/tslib/media/fileicons/
  searchFieldList = title,description,blob_name
  emptySearchAtStart = 1
  tryToOpenFileInline = 1


  //Define a Standard Configuration
  dummyView {
    alternatingLayouts = {$plugin.tx_drblob.alternatingLayouts}
    categoryDivider = ,
    lenghtOfDescription = {$plugin.tx_drblob.lenghtOfDescription}
    limit = 
    
    age_stdWrap {
      age = 1
    }

    author_stdWrap {
      wrap = |
    }

    category_stdWrap {
      wrap = |
    }

    date_stdWrap {
      date = {$plugin.tx_drblob.stdDateWrap}
    }
    
    description_stdWrap {
      stripHtml = 1
      crop < {$plugin.tx_drblob.lenghtOfDescription}
    }
    
    downloadLink_stdWrap {
      wrap = |      
      typolink {
        ATagBeforeWrap = 1
        ATagParams = class="tx_drblob_downloadlink"
      }
    }
    
    downloadcount_stdWrap {
      wrap = |
      wrap2 = &nbsp;|&nbsp;
    }

    email_stdWrap {
      wrap = |
      typolink {
        ATagParams = class="tx_drblob_emaillink"
      }
    }
    
    filename_stdWrap {
      wrap = |
    }
    
    filesize_stdWrap {
      bytes = 1
      bytes.labels = B| KB| MB| GB
      wrap = |
    }
    
    filechecksum_stdWrap {
      wrap = |
    }
    
    filetype_stdWrap {
      wrap = |
    }
    
    moreLink_stdWrap {
      wrap = |      
      typolink {
        ATagBeforeWrap = 1
        ATagParams = class="tx_drblob_morelink"
      }
    }
    
	version_stdWrap {
      wrap = |
    }
    
    title_stdWrap {
      wrap = |
    }
  }
  
  listView < .dummyView 
  listView {
    limit = 25
    
    vFolderTree_stdWrap {
      wrap = <div class="tx_drblob_list-vFolderTree">|</div>
    }
    
    vFolderTitleNO_stdWrap {
      wrap = |
    }
      
    vFolderTitleACT_stdWrap {
      wrap = <b>|</b>
    }
    
    vFolderIcon = IMAGE
    vFolderIcon {
      file = EXT:dr_blob/res/folder.gif
      border = 0
      params = style="vertical-align: bottom; margin-right: 2px; " align="top" class="c-recIcon"
    }
    
    vFolderGfxFolder = 
  }

  //TopView
  topView < .dummyView
  topView {
    limit = 5
    category_stdWrap {
      wrap = <p>|</p>
    }
    
    description_stdWrap {
      wrap = <p>|</p>
      stripHtml = 1
      crop = {$plugin.tx_drblob.lenghtOfDescription}
    }
  }
  
  
  //PersonalView
  personalView < .dummyView
  personalView {
    limit = 5
    category_stdWrap {
      wrap = <p>|</p>
    }
    
    description_stdWrap {
      wrap = <p>|</p>
      stripHtml = 1
      crop = {$plugin.tx_drblob.lenghtOfDescription}
    }
  }


  //SingleView
  singleView < .dummyView
  singleView {
    alternatingLayouts >
    substitutePagetitle = 1
    substituteIndextitle = 1

    date_stdWrap.date = {$plugin.tx_drblob.stdDateWrap} h:i a
    categoryDivider = </li><li>
    category_stdWrap.wrap = <ul><li>|</li></ul>

    description_stdWrap {
      stripHtml = 0
      crop >
    }

    filesize_stdWrap.bytes.labels = Bytes| KiloBytes| MegaBytes| GigaBytes
    
    title_stdWrap.wrap = <strong>|</strong>
  }


  _LOCAL_LANG {
  }
  
  _CSS_DEFAULT_STYLE (
    .tx_drblob_list {}
    th.tx_drblob_list-head {}
    td.tx_drblob_list-row1{}
    td.tx_drblob_list-row2{}
    
    div.tx_drblob_list-vFolderTree { float:left; }
    
    .tx_drblob_top {}
    th.tx_drblob_top-head {}
    th.tx_drblob_top-foot {}
    td.tx_drblob_top-row1 {}
    td.tx_drblob_top-row2 {}
    
    .tx_drblob_personal {}
    th.tx_drblob_personal-head {}
    th.tx_drblob_personal-foot {}
    td.tx_drblob_personal-row1 {}
    td.tx_drblob_personal-row2 {}
    .tx_drblob_personal-btn { margin-top: 15px; }
    
    .tx_drblob_single {}
  )
}


plugin.tx_linkhandler.tx_drblob_content {
  forceLink = 0
  parameter = {$plugin.tx_drblob.downloadPID}
  no_cache = 1
  additionalParams = &tx_drblob_pi1[downloadUid]={field:uid}
  additionalParams.insertData = 1 
  useCacheHash = 0
}